/**
 * Pan/Zoom - it's just a quick hack, so don't expect too much
 * @author Andrew Hedges, andrew@hedges.name
 * @created 2009-12-27 12:27:09
 * @updated 2012-04-25
 * @license MIT
 * @usage $.panzoom(); // use defaults
 *        $.panzoom('#mycontainer a', { 'small' : 'Zoom in by clicking', 'large' : 'Zoom out by clicking' }); // override defaults
 * @requires jQuery
 */
;(function(a){function l(b,d){b=b||".panzoom a";if(d){if(d.small){c.small=d.small}if(d.large){c.large=d.large}}a.each(a(b),function f(b,d){var f,g,i;f=a(this);g=a("img",f);i=new Image;i.onload=function(a){g.srcs={small:g.attr("src"),large:this.src};g.dimensions={small:[g.width(),g.height()],large:[i.width,i.height]};f.click(function(a){h(f,g);if(e(f,g)){k(f,g)}else{j(f,g,a)}a.preventDefault()}).attr("title",c.small)};i.src=f[0].href})}function k(a,b){b.animate({top:"0px",left:"0px",width:b.dimensions.small[0],height:b.dimensions.small[1]},"fast",function(){a.unbind("mousemove",i).attr("title",c.small);b.attr("src",b.srcs.small)})}function j(a,b,d){var e;e=g(a,b,d);b.animate({top:e[1],left:e[0],width:b.dimensions.large[0],height:b.dimensions.large[1]},"fast",function(){a.bind("mousemove",{a:a,img:b},i).attr("title",c.large)});b.attr("src",b.srcs.large)}function i(a){var b,c,d;b=a.data.a;c=a.data.img;d=g(b,c,a);c.css({top:d[1],left:d[0]});a.preventDefault()}function h(a,c){if(true!==c.applied_){b.a.width=c.dimensions.small[0]+"px";b.a.height=c.dimensions.small[1]+"px";a.css(b.a);c.css(b.img);c.applied_=true}}function g(a,b,c){var e,g,h,i;e=f(a,c);g=d(b.dimensions.small,b.dimensions.large,e);h=0-(g[1]-e[1])+"px";i=0-(g[0]-e[0])+"px";return[i,h]}function f(b,c){var d;d=a(b).offset();return[c.pageX-d.left,c.pageY-d.top]}function e(a,b){return b.width()>a.width()}function d(a,b,c){return[Math.round(c[0]/(a[0]/b[0])),Math.round(c[1]/(a[1]/b[1]))]}var b,c;"use strict";if(!a){throw"Requires either jQuery or Zepto."}b={a:{position:"relative",overflow:"hidden",display:"inline-block",width:undefined,height:undefined},img:{position:"absolute",top:"0px",left:"0px"}};c={small:"Click to zoom in.",large:"Click to zoom out."};a.extend({panzoom:l})})(jQuery);